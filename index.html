<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Jekyll v3.8.6">
    <title>Restaurant Prediction</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <!-- Custom styles for this template -->
    <link href="album.css" rel="stylesheet">
    <!-- Jquery -->
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <!-- Custom styles for this template -->
    <link href="album.css" rel="stylesheet">

    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="https://unpkg.com/ml5@0.4.1/dist/ml5.min.js" type="text/javascript"></script>
    <script src="main.js"></script>
    <script>
      function loadRestaurants(row, rowItem, name, action){
        let restaurant_list = create_restaurant_list();
        
        for (let i = 0; i < row; i++) {
          document.write("<div class='row'>");
          for (let j = 0; j < rowItem; j++) {
            let restaurantType = restaurant_list[j].type;
            let restaurantPrice = restaurant_list[j].price;
            if (restaurantPrice == 0) restaurantPrice = "€";
              else if (restaurantPrice == 1) restaurantPrice = "€€";
                else restaurantPrice = "€€€";
            let restaurantDistance = restaurant_list[j].distance;
            let restaurantSpiciness = restaurant_list[j].spiciness;
            if (restaurantSpiciness == 0) restaurantSpiciness = "none/low";
              else if (restaurantSpiciness == 1) restaurantSpiciness = "medium";
                else restaurantSpiciness = "high";
            let restaurantLoudness = restaurant_list[j].animation;
            if (restaurantLoudness == 0) restaurantLoudness = "calm";
              else if (restaurantPrice == 1) restaurantLoudness = "moderate noise";
                else restaurantLoudness = "rowdy";
            let restaurantSpeed = restaurant_list[j].service_speed;
            if (restaurantSpeed == 0) restaurantSpeed = "< 30 mins";
              else if (restaurantSpeed == 1) restaurantSpeed = "< 1 hour";
                else restaurantSpeed = "> 1 hour";
            
            document.write("<div class='col-3'>");
              document.write("<div class='card'>");
                document.write("<div class='card-horizontal' id ='"+name+i+j+"' onClick='"+action+"(this)' class='card mb-3' style='opacity:1; border: none; max-width: 540px;'>");
                  document.write("<div class='img-square-wrapper'>");
                    document.write("<img class='' src='images/sample.jpg' width='250' height='170'>");
                    document.write("</div>");
                    document.write("<div class='card-body'>");
                      //document.write("<h4 class='card-title'>Restaurant A</h4>");
                      document.write("<p class='card-text'>"+restaurantType+" . "+ restaurantPrice +" . "+ restaurantDistance +" kms</p>");
                      document.write("<p class='card-text'>Spiciness: "+restaurantSpiciness+"<br>Crowd: "+restaurantLoudness+"<br>Serving speed: "+restaurantSpeed+"</p>");

                      document.write("</div>");
                      document.write("</div>");
                        document.write("</div>");
                        document.write("</div>");
          }
          document.write("</div>&nbsp;");  
        }
      }

      function select(e){
        const element = document.querySelector("#"+e.id);
        if (element.style.border=="none")
          $(e).css("border", "solid green 3px");
        else
          $(e).css("border", "none");
      }

      function cross(e){
        const element = document.querySelector("#"+e.id);
        if (element.style.opacity<1)
          $(e).css("opacity", "1");
        else
          $(e).css("opacity", "0.5");
      }
      
      function acceptProposal(){
        alert('Cool! Enjoy your meal!')
        location.reload();
      }
      
      $(document).ready(function(){
        $("#prediction").hide();
        $("#showPrediction").click(function(){
          $("#prediction").show();
        });
      } );        
    </script>
  </head>

  <body>
    <main role="main">
      <section class="text-center" style="margin: 20px">
        <div class="container">
          <h2>Restaurant For You</h2>
          <p class="lead text-muted">Choose restaurants you will likely to go from following list:</p>
        </div>
      </section>
      <div class="album py-5 bg-light">
        <div class="container">
          <script>
            loadRestaurants(2, 4, "option", "select");
          </script>
          <p align="center" margin="20px">
            <a href="#prediction" id="showPrediction" class="btn btn-lg btn-primary my-2">Submit</a>
          </p> 
        </div>
      </div>
    </main>
  </body>

  <section id="prediction" class="jumbotron text-center">
    <div class="container">
      <svg class="bd-placeholder-img rounded-circle" width="140" height="140" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" focusable="false" role="img" aria-label="Placeholder: 140x140"><title>Placeholder</title><rect width="100%" height="100%" fill="#777"/><text x="50%" y="50%" fill="#777" dy=".3em">140x140</text></svg>
      <h2>Restaurant X</h2>
      <p>We think you will like this! </p>
      <p class="text-muted"><i>Or else cross out below options and try something else</i></p>
      <p>
        <a href="#" onClick="acceptProposal()" class="btn btn-primary my-2">I like this!</a>
        <a href="#prediction" class="btn btn-secondary my-2">Something else?</a>
      </p>
    </div>
    &nbsp;
    <script>
      loadRestaurants(1, 4, "liked", "cross");    
    </script>
  </section>

  <footer class="text-muted">
    <div class="container">
      <p>Interactive Machine Learning &copy; 2020</p>
    </div>
  </footer>
</html>